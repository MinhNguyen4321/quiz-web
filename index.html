<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="asset/img/favicon.ico">
    <title>Online Training</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.3/zephyr/bootstrap.min.css">
    <link rel="stylesheet" href="asset/css/style.css">
</head>

<body ng-app="myApp" ng-controller="homeCtrl">
    <header>
        <div class="container-fluid background"></div>
    </header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light py-2">
        <div class="container-fluid">
            <a class="navbar-brand" href="#!home">FPT Polytechnic</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#!introduce"><i class="me-1 fa-solid fa-circle-info"></i> Giới
                            thiệu</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#!contact"><i class="me-1 fa-solid fa-phone"></i> Liên hệ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#!feedback"><i class="me-1 fa-solid fa-comment-dots"></i> Góp ý</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#!q&a"><i class="me-1 fa-solid fa-comments"></i> Hỏi đáp</a>
                    </li>
                </ul>
                <form class="d-flex">
                    <input class="form-control me-2" ng-show="showSearch('/home')" ng-change="firstSubject()" ng-model="keyword" type="search" placeholder="Tìm kiếm" aria-label="Search">
                </form>
                <ul class="navbar-nav ">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="me-1 fa-solid fa-user"></i> Tài khoản
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-macos"
                            aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#!signup">Đăng ký</a></li>
                            <li><a class="dropdown-item" href="#!signin">Đăng nhập</a></li>
                            <li><a class="dropdown-item" href="#!forgotpass">Quên mật khẩu</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#!signout">Đăng xuất</a></li>
                            <li><a class="dropdown-item" href="#!changepass">Đổi mật khẩu</a></li>
                            <li><a class="dropdown-item" href="#!editprofile">Cập nhật tài khoản</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main>
        <div class="view h-100" ng-view></div> 
    </main>
    <footer class="container-fluid bg-secondary">
        <div class="d-flex flex-wrap justify-content-between align-items-center my-3 border-top">
            <div class="col-md-4 d-flex align-items-center">
                <span class="content">&copy; 2021 FPT Polytechnic</span>
            </div>

            <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
                <li class="ms-3"><a class="text-muted icon" target="_blank" href="https://www.facebook.com/fpt.poly">
                        <i class="fa-brands fa-facebook-square"></i>
                    </a></li>
                <li class="ms-3"><a class="text-muted icon" target="_blank"
                        href="https://www.youtube.com/channel/UCHXm-vzOfAuLucVBKDUfhvQ">
                        <i class="fa-brands fa-youtube"></i>
                    </a></li>
                <li class="ms-3"><a class="text-muted icon" target="_blank"
                        href="https://vi.wikipedia.org/wiki/Tr%C6%B0%E1%BB%9Dng_Cao_%C4%91%E1%BA%B3ng_Th%E1%BB%B1c_h%C3%A0nh_FPT">
                        <i class="fa-brands fa-wikipedia-w"></i>
                    </a></li>
            </ul>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/a1dd73cfa4.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-route/1.8.2/angular-route.min.js"></script>
    <script>
        var app = angular.module('myApp', ['ngRoute']);
        app.config(function ($routeProvider) {
            $routeProvider
                .when('/introduce', {
                    templateUrl: 'introduce.html'
                })
                .when('/contact', {
                    templateUrl: 'contact.html'
                })
                .when('/feedback', {
                    templateUrl: 'feedback.html'
                })
                .when('/q&a', {
                    templateUrl: 'q&a.html',
                    controller: 'q&aCtrl'
                })
                .when('/signup', {
                    templateUrl: 'signup.html',
                    controller: 'signUpCtrl'
                })
                .when('/signin', {
                    templateUrl: 'signin.html',
                    controller: 'signInCtrl'
                })
                .when('/signout', {
                    templateUrl: 'signout.html',
                    controller: 'signOutCtrl'
                })
                .when('/changepass', {
                    templateUrl: 'changepass.html',
                    controller: 'changePassCtrl'
                })
                .when('/forgotpass', {
                    templateUrl: 'forgotpass.html',
                    controller: 'forgotPassCtrl'
                })
                .when('/editprofile', {
                    templateUrl: 'editprofile.html',
                    controller: 'editProfileCtrl'
                })
                .when('/quiz/:idSubject/:nameSubject', {
                    templateUrl: 'quiz.html',
                    controller: 'quizCtrl'
                })
                .otherwise({
                    templateUrl: 'home.html'
                });
        });
        app.controller('homeCtrl', function ($scope, $http, $location) {
            $scope.subjects = [];
            $scope.students = [];
            $scope.pageSize = 4;
            $scope.start = 0;

            $http.get("asset/js/db/Subjects.js").then(
                function (response) {
                    $scope.subjects = response.data;
                },
                function (error) {
                    alert("Error: " + error.statusText);
                }
            );
            $http.get("asset/js/db/Students.js").then(
                function (response) {
                    $scope.students = response.data;
                },
                function (error) {
                    alert("Error: " + error.statusText);
                }
            );
            $scope.showSearch = function (path) {
                return $location.path() == path;
            };
            $scope.firstSubject = function () {
                console.log($scope.keyword);
                $scope.start = 0;
            }
            $scope.lastSubject = function () {
                var soTrang = Math.ceil($scope.subjects.length / $scope.pageSize);
                $scope.start = (soTrang - 1) * $scope.pageSize;
            }
            $scope.prevSubject = function () {
                if ($scope.start > 0) {
                    $scope.start -= $scope.pageSize;
                }
            }
            $scope.nextSubject = function () {
                if ($scope.start < $scope.subjects.length - $scope.pageSize) {
                    $scope.start += $scope.pageSize;
                }
            }
        });
        app.controller('q&aCtrl', function ($scope, $http) {
            $scope.questionAnswer = [];
            $http.get("asset/js/db/Q&A.js").then(
                function (response) {
                    $scope.questionAnswer = response.data;
                },
                function (error) {
                    alert("Error: " + error.statusText);
                }
            );
        });
        app.controller('quizCtrl', function ($scope, $http, $routeParams) {
            $scope.idSubject = $routeParams.idSubject;
            $scope.nameSubject = $routeParams.nameSubject;
            $scope.questions = [];
            $scope.pageSize = 1;
            $scope.start = 0;

            $http.get("asset/js/db/quizs/" + $scope.idSubject + ".js").then(
                function (response) {
                    $scope.questions= response.data;
                },
                function (error) {
                    alert("Error: " + error.statusText);
                }
            );
            
            $scope.firstQuiz = function () {
                console.log($scope.keyword);
                $scope.start = 0;
            }
            $scope.lastQuiz = function () {
                var soTrang = Math.ceil($scope.questions.length / $scope.pageSize);
                $scope.start = (soTrang - 1) * $scope.pageSize;
            }
            $scope.prevQuiz = function () {
                if ($scope.start > 0) {
                    $scope.start -= $scope.pageSize;
                }
            }
            $scope.nextQuiz = function () {
                if ($scope.start < $scope.questions.length - $scope.pageSize) {
                    $scope.start += $scope.pageSize;
                }
            }
        });
        app.controller('changePassCtrl', function($scope) {})
    </script>
</body>

</html>